<?xml version="1.0" encoding="utf-8"?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" assembly="InteractiveWaterPlan.Core" namespace="InteractiveWaterPlan.Core">
  
  <class name="Entity" mutable="false">
    <id name="SqlId">
      <column name="SQL_ID"/>
    </id>

    <property column="Entity_ID" name="Id" />
    <property column="Entity_Name" name="Name" />
    <property column="Entity_Type" name="Type" />
    <property column="Entity_RWP" name="RWP" />
    <property column="Entity_County" name="County" />
    <property column="Entity_Basin" name="Basin" />
    <property column="SQL_GEOG" name="WKTGeog" />

  </class>

  <class name="WaterUseEntity">
    <id name="SqlId">
      <column name="SQL_ID"/>
    </id>

    <property column="Entity_ID" name="Id" />
    <property column="Entity_Name" name="Name" />
    <property column="Entity_Type" name="Type" />
    <property column="Entity_RWP" name="RWP" />
    <property column="Entity_County" name="County" />
    <property column="Entity_Basin" name="Basin" />
    <property column="SQL_GEOG" name="WKTGeog" />
    
    <property column="Redundant_Water" name="IsRedundantSupply" />
    <property column="Source_Name" name="SourceName" />
    <property column="Source_ID" name="SourceId" />
    
    <!--//TODO: SSYEAR entries? -->
  </class>
  
  <sql-query name="GetAllEntities">
    <return class="Entity"/>
    exec dbo.usp_Select_ALL_tbl_GEMSS_Vector_TWDB_DB12_Water_Entities
  </sql-query>

  <sql-query name="GetEntitiesInGeography">
    <return class="Entity"/>
    exec dbo.usp_SpatialSelect_tbl_GEMSS_Vector_TWDB_DB12_Water_Entities :var_SelectPoly
  </sql-query>

  <sql-query name="GetEntitiesForReservoir">
    <query-param name="ReservoirId" type="int"/>
    <query-param name="Year" type="int"/>
    <return class="WaterUseEntity"/>
    exec dbo.usp_Select_WaterEntityUsage_By_ProposedReservoir_and_Year :var_DB12_ID, :var_EstYear
  </sql-query>
  
</hibernate-mapping>